{% load static i18n %}
{% load active_link %}

<header class="header">
    <a href="{% url 'pages:home' %}">
        <div class="header__brand">
            <img src="{% static 'img/logo.png' %}" alt="{% trans 'Marlin Logo' %}" draggable="false" class="header__logo">
            <div class="header__info">
                <h1 class="header__title">Marlin</h1>
                <p class="header__subtitle">{% trans "Fresh products near you" %}</p>
            </div>
        </div>
    </a>

    <nav class="header__nav">
        <ul class="header__nav-list">
            <li class="header__nav-item">
                <a href="{% url 'catalog:product_list' %}" class="header__nav-link {% active_link request 'catalog:product_list' 'header__nav-link--active' %}">{% trans "Catalog" %}</a>
            </li>
            <li class="header__nav-item">
                <a href="{% url 'pages:contact' %}" class="header__nav-link {% active_link request 'pages:contact' 'header__nav-link--active' %}">{% trans "Contacts" %}</a>
            </li>
            <li class="header__nav-item">
                {% if request.user.is_authenticated %}
                <form action="{% url 'accounts:signout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="header__nav-link">{% trans "Sign out" %}</button>
                </form>
                {% else %}
                    <a href="{% url 'accounts:signin' %}" class="header__nav-link {% active_link request 'accounts:signin' 'header__nav-link--active' %}">{% trans "Sign in" %}</a>
                {% endif %}
            </li>
            <li class="header__nav-item dropdown">
                <button class="header__nav-button dropdown__toggle" title="{% trans 'Settings' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                        <path d="M47.16,21.221l-5.91-0.966c-0.346-1.186-0.819-2.326-1.411-3.405l3.45-4.917c0.279-0.397,0.231-0.938-0.112-1.282 l-3.889-3.887c-0.347-0.346-0.893-0.391-1.291-0.104l-4.843,3.481c-1.089-0.602-2.239-1.08-3.432-1.427l-1.031-5.886 C28.607,2.35,28.192,2,27.706,2h-5.5c-0.49,0-0.908,0.355-0.987,0.839l-0.956,5.854c-1.2,0.345-2.352,0.818-3.437,1.412l-4.83-3.45 c-0.399-0.285-0.942-0.239-1.289,0.106L6.82,10.648c-0.343,0.343-0.391,0.883-0.112,1.28l3.399,4.863 c-0.605,1.095-1.087,2.254-1.438,3.46l-5.831,0.971c-0.482,0.08-0.836,0.498-0.836,0.986v5.5c0,0.485,0.348,0.9,0.825,0.985 l5.831,1.034c0.349,1.203,0.831,2.362,1.438,3.46l-3.441,4.813c-0.284,0.397-0.239,0.942,0.106,1.289l3.888,3.891 c0.343,0.343,0.884,0.391,1.281,0.112l4.87-3.411c1.093,0.601,2.248,1.078,3.445,1.424l0.976,5.861C21.3,47.647,21.717,48,22.206,48 h5.5c0.485,0,0.9-0.348,0.984-0.825l1.045-5.89c1.199-0.353,2.348-0.833,3.43-1.435l4.905,3.441 c0.398,0.281,0.938,0.232,1.282-0.111l3.888-3.891c0.346-0.347,0.391-0.894,0.104-1.292l-3.498-4.857 c0.593-1.08,1.064-2.222,1.407-3.408l5.918-1.039c0.479-0.084,0.827-0.5,0.827-0.985v-5.5C47.999,21.718,47.644,21.3,47.16,21.221z M25,32c-3.866,0-7-3.134-7-7c0-3.866,3.134-7,7-7s7,3.134,7,7C32,28.866,28.866,32,25,32z"></path>
                    </svg>
                </button>

                <ul class="dropdown__menu dropdown__menu--right">
                    <li class="dropdown__menu-item">
                        <span class="dropdown__menu-label">{% trans 'Dark theme' %}</span>
                        <label class="header__switch">
                            <input type="checkbox" id="theme-toggle" class="header__switch-input">
                            <span class="header__switch-slider"></span>
                        </label>
                    </li>
                    <li class="dropdown__menu-item dropdown">
                        {% get_current_language as CURRENT_LANGUAGE %}
                        <button class="dropdown__toggle dropdown__menu-button">{% trans "Language" %} <svg class="language-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.58 19.37L17.59 11.01C17.38 10.46 16.91 10.12 16.37 10.12C15.83 10.12 15.37 10.46 15.14 11.03L12.16 19.37C12.02 19.76 12.22 20.19 12.61 20.33C13 20.47 13.43 20.27 13.57 19.88L14.19 18.15H18.54L19.16 19.88C19.27 20.19 19.56 20.38 19.87 20.38C19.95 20.38 20.04 20.37 20.12 20.34C20.51 20.2 20.71 19.77 20.57 19.38L20.58 19.37ZM14.74 16.64L16.38 12.05L18.02 16.64H14.74ZM12.19 7.85C9.92999 11.42 7.89 13.58 5.41 15.02C5.29 15.09 5.16 15.12 5.04 15.12C4.78 15.12 4.53 14.99 4.39 14.75C4.18 14.39 4.3 13.93 4.66 13.73C6.75999 12.51 8.48 10.76 10.41 7.86H4.12C3.71 7.86 3.37 7.52 3.37 7.11C3.37 6.7 3.71 6.36 4.12 6.36H7.87V4.38C7.87 3.97 8.21 3.63 8.62 3.63C9.02999 3.63 9.37 3.97 9.37 4.38V6.36H13.12C13.53 6.36 13.87 6.7 13.87 7.11C13.87 7.52 13.53 7.86 13.12 7.86H12.18L12.19 7.85ZM12.23 15.12C12.1 15.12 11.97 15.09 11.85 15.02C11.2 14.64 10.57 14.22 9.97999 13.78C9.64999 13.53 9.58 13.06 9.83 12.73C10.08 12.4 10.55 12.33 10.88 12.58C11.42 12.99 12.01 13.37 12.61 13.72C12.97 13.93 13.09 14.39 12.88 14.75C12.74 14.99 12.49 15.12 12.23 15.12Z"/></svg></button>
                        <ul class="dropdown__menu">
                            <li class="dropdown__menu-item">
                                <form method="post" action="{% url 'set_language' %}">
                                    {% csrf_token %}
                                    <input type="hidden" name="language" value="en">
                                    <button type="submit" class="dropdown__menu-button {% if CURRENT_LANGUAGE == 'en' %}dropdown__menu-button--active{% endif %}">
                                        <svg class="flag-icon" xmlns="http://www.w3.org/2000/svg" id="flag-icons-us" viewBox="0 0 640 480"><path fill="#bd3d44" d="M0 0h640v480H0"/><path stroke="#fff" stroke-width="37" d="M0 55.3h640M0 129h640M0 203h640M0 277h640M0 351h640M0 425h640"/><path fill="#192f5d" d="M0 0h364.8v258.5H0"/><marker id="us-a" markerHeight="30" markerWidth="30"><path fill="#fff" d="m14 0 9 27L0 10h28L5 27z"/></marker><path fill="none" marker-mid="url(#us-a)" d="m0 0 16 11h61 61 61 61 60L47 37h61 61 60 61L16 63h61 61 61 61 60L47 89h61 61 60 61L16 115h61 61 61 61 60L47 141h61 61 60 61L16 166h61 61 61 61 60L47 192h61 61 60 61L16 218h61 61 61 61 60z"/>
                                        </svg> English
                                    </button>
                                </form>
                            </li>
                            <li class="dropdown__menu-item">
                                <form method="post" action="{% url 'set_language' %}">
                                    {% csrf_token %}
                                    <input type="hidden" name="language" value="ru">
                                    <button type="submit" class="dropdown__menu-button {% if CURRENT_LANGUAGE == 'ru' %}dropdown__menu-button--active{% endif %}">
                                        <svg  class="flag-icon" xmlns="http://www.w3.org/2000/svg" id="flag-icons-ru" viewBox="0 0 640 480"><path fill="#fff" d="M0 0h640v160H0z"/><path fill="#0039a6" d="M0 160h640v160H0z"/><path fill="#d52b1e" d="M0 320h640v160H0z"/>
                                        </svg> Русский
                                    </button>
                                </form>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
</header>
